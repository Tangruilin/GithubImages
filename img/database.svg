<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1178.8856px" preserveAspectRatio="none" style="width:3004px;height:1178px;background:#FFFFFF;" version="1.1" viewBox="0 0 3004 1178" width="3004.3988px" zoomAndPan="magnify"><defs><filter height="300%" id="f4ocz4kqyeyn5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="8.79765395894428"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="17.59530791788856" dy="17.59530791788856" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:4.39882697947214;stroke-dasharray:5.0,5.0;" x1="171.5543" x2="171.5543" y1="189.6779" y2="976.0649"/><line style="stroke:#A80036;stroke-width:4.39882697947214;stroke-dasharray:5.0,5.0;" x1="1521.9941" x2="1521.9941" y1="189.6779" y2="976.0649"/><line style="stroke:#A80036;stroke-width:4.39882697947214;stroke-dasharray:5.0,5.0;" x1="2832.8446" x2="2832.8446" y1="189.6779" y2="976.0649"/><rect fill="#FEFECE" filter="url(#f4ocz4kqyeyn5)" height="145.6897" style="stroke:#A80036;stroke-width:6.598240469208211;" width="281.5249" x="21.9941" y="21.9941"/><text fill="#000000" font-family="sans-serif" font-size="61.5836" lengthAdjust="spacing" textLength="219.9413" x="52.7859" y="123.3605">Client层</text><rect fill="#FEFECE" filter="url(#f4ocz4kqyeyn5)" height="145.6897" style="stroke:#A80036;stroke-width:6.598240469208211;" width="281.5249" x="21.9941" y="971.6661"/><text fill="#000000" font-family="sans-serif" font-size="61.5836" lengthAdjust="spacing" textLength="219.9413" x="52.7859" y="1073.0324">Client层</text><rect fill="#FEFECE" filter="url(#f4ocz4kqyeyn5)" height="145.6897" style="stroke:#A80036;stroke-width:6.598240469208211;" width="307.9179" x="1359.2375" y="21.9941"/><text fill="#000000" font-family="sans-serif" font-size="61.5836" lengthAdjust="spacing" textLength="246.3343" x="1390.0293" y="123.3605">Server层</text><rect fill="#FEFECE" filter="url(#f4ocz4kqyeyn5)" height="145.6897" style="stroke:#A80036;stroke-width:6.598240469208211;" width="307.9179" x="1359.2375" y="971.6661"/><text fill="#000000" font-family="sans-serif" font-size="61.5836" lengthAdjust="spacing" textLength="246.3343" x="1390.0293" y="1073.0324">Server层</text><rect fill="#FEFECE" filter="url(#f4ocz4kqyeyn5)" height="145.6897" style="stroke:#A80036;stroke-width:6.598240469208211;" width="237.5367" x="2705.2786" y="21.9941"/><text fill="#000000" font-family="sans-serif" font-size="61.5836" lengthAdjust="spacing" textLength="175.9531" x="2736.0704" y="123.3605">Raft层</text><rect fill="#FEFECE" filter="url(#f4ocz4kqyeyn5)" height="145.6897" style="stroke:#A80036;stroke-width:6.598240469208211;" width="237.5367" x="2705.2786" y="971.6661"/><text fill="#000000" font-family="sans-serif" font-size="61.5836" lengthAdjust="spacing" textLength="175.9531" x="2736.0704" y="1073.0324">Raft层</text><polygon fill="#A80036" points="1469.2082,320.5624,1513.1965,338.1577,1469.2082,355.753,1486.8035,338.1577" style="stroke:#A80036;stroke-width:4.39882697947214;"/><line style="stroke:#A80036;stroke-width:4.39882697947214;stroke-dasharray:2.0,2.0;" x1="171.5543" x2="1495.6012" y1="338.1577" y2="338.1577"/><text fill="#000000" font-family="sans-serif" font-size="57.1848" lengthAdjust="spacing" textLength="699.4135" x="202.346" y="316.795">Get/Put/Delete/Snap等操作</text><polygon fill="#A80036" points="219.9413,460.2445,175.9531,477.8398,219.9413,495.4351,202.346,477.8398" style="stroke:#A80036;stroke-width:4.39882697947214;"/><line style="stroke:#A80036;stroke-width:4.39882697947214;stroke-dasharray:2.0,2.0;" x1="193.5484" x2="1517.5953" y1="477.8398" y2="477.8398"/><text fill="#000000" font-family="sans-serif" font-size="57.1848" lengthAdjust="spacing" textLength="1244.868" x="246.3343" y="456.4771">如果请求的Node不是Leader，返回Not Leader Err</text><polygon fill="#A80036" points="2780.0587,599.9265,2824.0469,617.5219,2780.0587,635.1172,2797.654,617.5219" style="stroke:#A80036;stroke-width:4.39882697947214;"/><line style="stroke:#A80036;stroke-width:4.39882697947214;stroke-dasharray:2.0,2.0;" x1="1521.9941" x2="2806.4516" y1="617.5219" y2="617.5219"/><text fill="#000000" font-family="sans-serif" font-size="57.1848" lengthAdjust="spacing" textLength="1205.2786" x="1552.7859" y="596.1592">如果请求的Node是Leader，交给Raft层进行共识</text><polygon fill="#A80036" points="1570.3812,739.6086,1526.393,757.2039,1570.3812,774.7992,1552.7859,757.2039" style="stroke:#A80036;stroke-width:4.39882697947214;"/><line style="stroke:#A80036;stroke-width:4.39882697947214;stroke-dasharray:2.0,2.0;" x1="1543.9883" x2="2828.4457" y1="757.2039" y2="757.2039"/><text fill="#000000" font-family="sans-serif" font-size="57.1848" lengthAdjust="spacing" textLength="343.1085" x="1596.7742" y="735.8413">消息达成共识</text><polygon fill="#A80036" points="219.9413,879.2907,175.9531,896.886,219.9413,914.4813,202.346,896.886" style="stroke:#A80036;stroke-width:4.39882697947214;"/><line style="stroke:#A80036;stroke-width:4.39882697947214;stroke-dasharray:2.0,2.0;" x1="193.5484" x2="1517.5953" y1="896.886" y2="896.886"/><text fill="#000000" font-family="sans-serif" font-size="57.1848" lengthAdjust="spacing" textLength="1156.8915" x="246.3343" y="875.5234">基于消息类型进行Get/Put/Delete/Snap的返回</text><!--MD5=[d0271648a2aa94e8042dc3c5be94779c]
@startuml database
skinparam dpi 1600
scale 180*90
Client层 - -> Server层 : Get/Put/Delete/Snap等操作
Client层 <- - Server层 : 如果请求的Node不是Leader，返回Not Leader Err
Server层 - -> Raft层	: 如果请求的Node是Leader，交给Raft层进行共识
Server层 <- - Raft层 : 消息达成共识
Client层 <- - Server层 : 基于消息类型进行Get/Put/Delete/Snap的返回
@enduml

PlantUML version 1.2021.14(Sat Nov 13 00:46:50 CST 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>